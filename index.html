<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Application</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2.5rem;
            margin: 1rem;
            transition: transform 0.3s ease;
        }

        .container:hover {
            transform: translateY(-5px);
        }

        .section {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section.active {
            display: block;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 2.2rem;
            font-weight: 600;
        }

        h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 500;
        }

        .welcome-screen p {
            color: #666;
            margin-bottom: 2.5rem;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .question-container {
            margin-bottom: 2.5rem;
            padding: 0 1rem;
        }

        .options {
            display: grid;
            gap: 1.2rem;
            margin-top: 2rem;
        }

        .option {
            padding: 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
            font-size: 1.1rem;
            color: #2c3e50;
        }

        .option:hover {
            background-color: #f8f9fa;
            border-color: #4CAF50;
            transform: translateX(5px);
        }

        .option.selected {
            background-color: #e8f5e9;
            border-color: #4CAF50;
        }

        .result-screen {
            text-align: center;
            padding: 2rem 0;
        }

        .score {
            font-size: 2.5rem;
            color: #4CAF50;
            margin: 1.5rem 0;
            font-weight: 600;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 2rem 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50 0%, #45a049 100%);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 1rem 0;
        }

        .timer {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
            padding: 0.5rem 1rem;
            background-color: #f8f9fa;
            border-radius: 50px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .timer.warning {
            color: #f44336;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        #result-message {
            font-size: 1.2rem;
            color: #666;
            margin: 1.5rem 0;
            line-height: 1.6;
        }

        .result-details {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .result-message {
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .score-breakdown {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .score-breakdown p {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                margin: 1rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            h2 {
                font-size: 1.3rem;
            }

            .btn {
                padding: 12px 24px;
                font-size: 1rem;
            }

            .option {
                padding: 1rem;
                font-size: 1rem;
            }

            .score {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .options {
                gap: 0.8rem;
            }

            .option {
                padding: 0.8rem;
            }
        }

        .admin-form {
            display: none;
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .admin-form.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2196F3;
        }

        .option-input {
            display: flex;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }

        .option-input input {
            flex: 1;
        }

        .option-input input[type="radio"] {
            width: auto;
            margin-right: 0.5rem;
        }

        .add-option-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .remove-option-btn {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .admin-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .admin-actions button {
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .save-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
        }

        .cancel-btn {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            color: white;
            border: none;
        }

        .quiz-selection {
            display: grid;
            gap: 1.2rem;
            margin: 2rem 0;
        }

        .quiz-option {
            padding: 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: white;
            font-size: 1.1rem;
            color: #2c3e50;
            text-align: left;
        }

        .quiz-option:hover {
            background-color: #f8f9fa;
            border-color: #4CAF50;
            transform: translateX(5px);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Admin Form -->
        <div class="admin-form" id="admin-form">
            <h2>Add New Question</h2>
            <form id="question-form">
                <div class="form-group">
                    <label for="admin-question">Question:</label>
                    <textarea id="admin-question" rows="3" required></textarea>
                </div>
                <div class="form-group">
                    <label>Options:</label>
                    <div id="options-container">
                        <div class="option-input">
                            <input type="text" placeholder="Option 1" required>
                            <input type="radio" name="correct" value="0" required>
                        </div>
                        <div class="option-input">
                            <input type="text" placeholder="Option 2" required>
                            <input type="radio" name="correct" value="1" required>
                        </div>
                    </div>
                    <button type="button" class="add-option-btn" onclick="addOption()">Add Option</button>
                </div>
                <div class="admin-actions">
                    <button type="button" class="cancel-btn" onclick="toggleAdminForm()">Cancel</button>
                    <button type="submit" class="save-btn">Save Question</button>
                </div>
            </form>
        </div>

        <!-- Welcome Screen -->
        <div class="section active" id="welcome-screen">
            <h1>Welcome to the Quiz!</h1>
            <p>Please select a quiz to begin:</p>
            <div class="quiz-selection">
                <button class="quiz-option" onclick="selectQuiz('general')">General Knowledge Quiz</button>
                <button class="quiz-option" onclick="selectQuiz('xircon')">XIRCON HOMES - NEW EMPLOYEE KNOWLEDGE QUIZ</button>
            </div>
        </div>

        <!-- Quiz Questions -->
        <div class="section" id="quiz-section">
            <div class="question-container">
                <div id="timer-container">Time left: <span id="timer">30</span>s</div>
                <h2 id="question"></h2>
                <div class="options" id="options">
                    <!-- Options will be dynamically added here -->
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <button class="btn" id="next-btn" onclick="nextQuestion()">Next Question</button>
        </div>

        <!-- Final Result -->
        <div class="section" id="result-screen">
            <h1>Quiz Completed!</h1>
            <div class="score">Your Score: <span id="final-score">0</span></div>
            <div id="result-message"></div>
            <button class="btn" onclick="restartQuiz()">Try Again</button>
        </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Clear existing quiz data
            localStorage.removeItem('quizData');

            // DOM elements
            const questionElement = document.getElementById('question');
            const optionsElement = document.getElementById('options');
            const nextButton = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress');
            const timerElement = document.getElementById('timer');
            const scoreElement = document.getElementById('final-score');
            const resultMessage = document.getElementById('result-message');

            // Quiz state variables
            let currentQuestion = 0;
            let score = 0;
            let selectedOption = null;
            let selectedAnswers = [];
            let timer;
            let isQuizActive = false;
            let tabChangeCount = 0;
            let currentQuizKey = '';
            const MAX_TAB_CHANGES = 2;

            // Initialize quiz data
            const defaultQuizData = [
                {
                    question: "What is the capital of France?",
                    options: ["London", "Berlin", "Paris", "Madrid"],
                    correct: 2
                },
                {
                    question: "Which planet is known as the Red Planet?",
                    options: ["Venus", "Mars", "Jupiter", "Saturn"],
                    correct: 1
                },
                {
                    question: "What is 2 + 2?",
                    options: ["3", "4", "5", "6"],
                    correct: 1
                },
                {
                    question: "Who painted the Mona Lisa?",
                    options: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
                    correct: 2
                },
                {
                    question: "Which element has the chemical symbol 'Au'?",
                    options: ["Silver", "Gold", "Copper", "Aluminum"],
                    correct: 1
                },
                {
                    question: "What is the largest planet in our solar system?",
                    options: ["Mars", "Saturn", "Jupiter", "Neptune"],
                    correct: 2
                },
                {
                    question: "Who wrote 'Romeo and Juliet'?",
                    options: ["Charles Dickens", "William Shakespeare", "Jane Austen", "Mark Twain"],
                    correct: 1
                },
                {
                    question: "What is the largest organ in the human body?",
                    options: ["Heart", "Brain", "Liver", "Skin"],
                    correct: 3
                },
                {
                    question: "Which country is home to the kangaroo?",
                    options: ["New Zealand", "South Africa", "Australia", "Brazil"],
                    correct: 2
                },
                {
                    question: "What is the hardest natural substance on Earth?",
                    options: ["Gold", "Iron", "Diamond", "Platinum"],
                    correct: 2
                }
            ];

            // Initialize Xircon quiz data structure
            const xirconQuizData = [
                {
                    question: "What are Xircon Homes' core offerings?",
                    options: [
                        "Standard custom homes only",
                        "Full custom homes only",
                        "Standard custom, full custom, and pre-designed custom homes",
                        "Apartment buildings and townhouses"
                    ],
                    correct: 2
                },
                {
                    question: "What is Xircon Homes' primary focus in Western Melbourne?",
                    options: [
                        "Apartment developments",
                        "Commercial construction",
                        "Greenfield developments",
                        "Renovation projects"
                    ],
                    correct: 2
                },
                {
                    question: "What is Xircon Homes' primary focus in South East Melbourne?",
                    options: [
                        "Knockdown rebuild projects",
                        "Heritage restoration",
                        "High-density apartments",
                        "Commercial buildings"
                    ],
                    correct: 0
                },
                {
                    question: "What is the service area radius for Xircon Homes from Melbourne CBD?",
                    options: ["25km", "50km", "75km", "100km"],
                    correct: 1
                },
                {
                    question: "In Xircon's building process, what happens during the 'New Home Selection' step?",
                    options: [
                        "Interior design consultation and material selection",
                        "Initial consultation, preliminary design, and quotation",
                        "Contract signing",
                        "Tender preparation"
                    ],
                    correct: 1
                },
                {
                    question: "In Xircon's knockdown rebuild process, who is responsible for engaging the demolition contractor?",
                    options: [
                        "Xircon Homes",
                        "The client",
                        "The local council",
                        "A third-party project manager"
                    ],
                    correct: 1
                },
                {
                    question: "What is the typical deposit structure for a Xircon home build?",
                    options: [
                        "10% upfront payment",
                        "5% deposit (split between initial, tender, and contract signing)",
                        "20% deposit before construction begins",
                        "Equal monthly payments throughout construction"
                    ],
                    correct: 1
                },
                {
                    question: "What happens during Xircon's 'Tender' stage of the building process?",
                    options: [
                        "Land is purchased",
                        "Construction begins",
                        "Formulation of detailed pricing and specification documentation",
                        "Council approvals are finalized"
                    ],
                    correct: 2
                },
                {
                    question: "What client action is required after the 'Practical Completion' stage at Xircon?",
                    options: [
                        "Final inspection of the property",
                        "Payment of outstanding balance",
                        "Approval of landscaping plans",
                        "Signing an occupancy agreement"
                    ],
                    correct: 0
                },
                {
                    question: "What happens during Xircon's 'Interior Design and Selections' stage?",
                    options: [
                        "Virtual reality home tour",
                        "Cost estimation only",
                        "Color consultation and material selection",
                        "Floor plan adjustments"
                    ],
                    correct: 2
                },
                {
                    question: "What is the client's responsibility during the 'Post Contract' phase at Xircon?",
                    options: [
                        "Supervising construction crews",
                        "Coordinating with neighbors",
                        "Providing necessary information for permit applications",
                        "Ordering construction materials"
                    ],
                    correct: 2
                },
                {
                    question: "What special document must be obtained before a knockdown rebuild can commence?",
                    options: [
                        "Real estate transfer deed",
                        "Demolition permit and asbestos clearance",
                        "Historic preservation waiver",
                        "Building height variance"
                    ],
                    correct: 1
                },
                {
                    question: "During which phase of Xircon's building process are necessary permits and approvals obtained?",
                    options: [
                        "New Home Selection",
                        "New Home Confirmation",
                        "Tender",
                        "Post Contract"
                    ],
                    correct: 3
                },
                {
                    question: "What is included in Xircon's post-construction service?",
                    options: [
                        "3-month maintenance inspection",
                        "12-month maintenance period with 3-month inspection",
                        "5-year structural warranty only",
                        "Lifetime service agreement"
                    ],
                    correct: 1
                },
                {
                    question: "What is Xircon's policy regarding variations after contract signing?",
                    options: [
                        "Unlimited variations allowed",
                        "Up to three variations permitted",
                        "No variations permitted",
                        "Variations allowed with 25% surcharge"
                    ],
                    correct: 2
                },
                {
                    question: "What is Xircon's rock removal assurance for first home buyers?",
                    options: [
                        "Free unlimited rock removal",
                        "Rock removal at cost",
                        "Flat fee of $1,500",
                        "Site relocation if rocks are found"
                    ],
                    correct: 2
                },
                {
                    question: "What type of building contract does Xircon use?",
                    options: [
                        "Cost Plus Contract",
                        "HIA Fixed Price Contract",
                        "Time and Materials Contract",
                        "Progressive Payment Contract"
                    ],
                    correct: 1
                },
                {
                    question: "What bonus does Xircon offer specifically for first home buyers?",
                    options: [
                        "Up to $50,000 in bonus upgrades",
                        "Up to $70,000 in bonus upgrades",
                        "Up to $90,000 in bonus upgrades",
                        "Free landscaping package"
                    ],
                    correct: 2
                },
                {
                    question: "What are the two main unique selling points that Xircon focuses on in their content?",
                    options: [
                        "Experience and technology",
                        "Affordability and quality",
                        "Speed and volume",
                        "Design and innovation"
                    ],
                    correct: 1
                },
                {
                    question: "What service does Xircon provide to help first home buyers with financing?",
                    options: [
                        "Direct loans",
                        "Rent-to-own programs",
                        "In-house loan specialists",
                        "Government grant applications only"
                    ],
                    correct: 2
                },
                {
                    question: "Who is responsible for performing the three-month maintenance inspection after home completion?",
                    options: [
                        "The client must schedule this with a third-party inspector",
                        "Xircon Homes conducts this as part of their post-construction service",
                        "Local council building inspectors",
                        "The client's insurance company"
                    ],
                    correct: 1
                },
                {
                    question: "What is the approximate timeframe from initial planning to contract signing at Xircon?",
                    options: [
                        "2-3 weeks",
                        "4-8 weeks",
                        "3-4 months",
                        "6 months or more"
                    ],
                    correct: 1
                },
                {
                    question: "What is the typical construction period for a single-story Xircon home?",
                    options: [
                        "10 weeks",
                        "20 weeks",
                        "30 weeks",
                        "52 weeks"
                    ],
                    correct: 1
                },
                {
                    question: "What additional step is required for knockdown rebuild projects that isn't needed for greenfield builds?",
                    options: [
                        "Special foundation reinforcement",
                        "Asset Protection Permit",
                        "Higher insurance coverage",
                        "Heritage assessment"
                    ],
                    correct: 1
                },
                {
                    question: "During which stage of Xircon's process would a client select fixtures, colors, and materials?",
                    options: [
                        "New Home Selection",
                        "Tender",
                        "Interior Design and Selections",
                        "Contract"
                    ],
                    correct: 2
                },
                {
                    question: "What is a Greenfield Site in Australian home building terminology?",
                    options: [
                        "Land that has never been built on before",
                        "Land with excellent agricultural potential",
                        "Land that has been previously developed but abandoned",
                        "Land with significant natural vegetation"
                    ],
                    correct: 0
                },
                {
                    question: "What is a 'Brownfield Site' in Australian building terminology?",
                    options: [
                        "Land with poor soil quality",
                        "Land that requires environmental remediation",
                        "Previously developed land that has been abandoned or underutilized",
                        "Land designated for industrial use only"
                    ],
                    correct: 2
                },
                {
                    question: "What is Lender's Mortgage Insurance (LMI) in Australian home financing?",
                    options: [
                        "Insurance that protects the homeowner if they can't make payments",
                        "Insurance that protects the lender if the borrower defaults",
                        "Insurance against structural defects",
                        "Coverage for home contents"
                    ],
                    correct: 1
                },
                {
                    question: "When is Lender's Mortgage Insurance typically required in Australia?",
                    options: [
                        "When the deposit is less than 10% of property value",
                        "When the deposit is less than 15% of property value",
                        "When the deposit is less than 20% of property value",
                        "When the deposit is less than 25% of property value"
                    ],
                    correct: 2
                },
                {
                    question: "What is a house and land package in Australia?",
                    options: [
                        "A combined offering where a builder has pre-selected land and matched it with suitable home designs",
                        "A government program for first home buyers",
                        "A special tax arrangement for property developers",
                        "A real estate listing that includes furniture"
                    ],
                    correct: 0
                },
                {
                    question: "What is conveyancing in the Australian property process?",
                    options: [
                        "The process of designing the home layout",
                        "The legal process of transferring property ownership",
                        "The physical measurement of the property",
                        "The inspection process"
                    ],
                    correct: 1
                },
                {
                    question: "What are covenants in Australian property development?",
                    options: [
                        "Financial agreements between builders and banks",
                        "Rules restricting how you can build or modify your property",
                        "Guarantees on building materials",
                        "Contracts with utility providers"
                    ],
                    correct: 1
                },
                {
                    question: "What is typically different about building in established areas vs. greenfield sites?",
                    options: [
                        "Established areas have no building regulations",
                        "Established areas typically have existing infrastructure and may have space constraints",
                        "Greenfield sites are always cheaper to build on",
                        "Greenfield sites require no council approval"
                    ],
                    correct: 1
                },
                {
                    question: "What is the typical maintenance period offered after home completion in the Australian building industry?",
                    options: [
                        "3 months",
                        "6 months",
                        "12 months",
                        "24 months"
                    ],
                    correct: 2
                },
                {
                    question: "What would be affected by an underground electricity pit application in a knockdown rebuild project?",
                    options: [
                        "The home's internal electrical wiring plans",
                        "The timeline for electricity connection",
                        "The positioning of the building on the block",
                        "The tariff rate for electricity"
                    ],
                    correct: 1
                }
            ];

            // Make functions available globally
            window.selectQuiz = function(quizType) {
                console.log('Quiz selected:', quizType); // Debug log
                currentQuizKey = quizType === 'xircon' ? 'xirconQuizData' : 'quizData';
                
                // Initialize appropriate quiz data if it doesn't exist
                if (quizType === 'general' && !localStorage.getItem('quizData')) {
                    localStorage.setItem('quizData', JSON.stringify(defaultQuizData));
                } else if (quizType === 'xircon' && !localStorage.getItem('xirconQuizData')) {
                    localStorage.setItem('xirconQuizData', JSON.stringify(xirconQuizData));
                }
                
                // Load quiz data
                const savedData = localStorage.getItem(currentQuizKey);
                console.log('Saved data:', savedData); // Debug log
                
                if (savedData) {
                    quizData = JSON.parse(savedData);
                    if (quizData && quizData.length > 0) {
                        // Show quiz section and start quiz
                        document.getElementById('welcome-screen').classList.remove('active');
                        document.getElementById('quiz-section').classList.add('active');
                        startQuiz();
                    } else {
                        alert('No questions available for this quiz yet. Please add questions in the admin panel.');
                    }
                } else {
                    alert('No questions available for this quiz yet. Please add questions in the admin panel.');
                }
            };

            window.startQuiz = function() {
                console.log('Starting quiz...'); // Debug log
                // Reset quiz state
                currentQuestion = 0;
                score = 0;
                selectedAnswers = [];
                selectedOption = null;
                tabChangeCount = 0;
                isQuizActive = true;

                // Show first question
                showQuestion();
                startTimer();

                // Update progress bar
                updateProgress();
            };

            window.nextQuestion = function() {
                if (selectedOption === null) return;
                
                // Save answer
                selectedAnswers[currentQuestion] = selectedOption;
                if (selectedOption === quizData[currentQuestion].correct) {
                    score++;
                }
                
                // Clear timer
                if (timer) clearInterval(timer);
                
                // Move to next question
                currentQuestion++;
                if (currentQuestion < quizData.length) {
                    showQuestion();
                    updateProgress();
                } else {
                    showResults();
                }
            };

            function updateProgress() {
                const progress = ((currentQuestion) / quizData.length) * 100;
                document.getElementById('progress').style.width = `${progress}%`;
            }

            function showQuestion() {
                console.log('Showing question:', currentQuestion); // Debug log
                const current = quizData[currentQuestion];
                
                // Update question text
                questionElement.textContent = current.question;
                
                // Clear previous options
                optionsElement.innerHTML = '';
                
                // Add new options
                current.options.forEach((option, index) => {
                    const button = document.createElement('div');
                    button.className = 'option';
                    button.textContent = option;
                    button.onclick = () => selectAnswer(index);
                    optionsElement.appendChild(button);
                });
                
                // Reset selected option
                selectedOption = null;
                
                // Update next button state
                nextButton.disabled = true;
                nextButton.style.opacity = '0.5';
                
                // Start timer for this question
                startTimer();
            }

            window.selectAnswer = function(index) {
                // Remove previous selection
                const options = document.querySelectorAll('.option');
                options.forEach(option => option.classList.remove('selected'));
                
                // Add new selection
                options[index].classList.add('selected');
                selectedOption = index;
                nextButton.disabled = false;
                nextButton.style.opacity = '1';
            };

            function startTimer() {
                if (timer) clearInterval(timer);
                
                const TIME_PER_QUESTION = 30;
                let timeLeft = TIME_PER_QUESTION;
                
                // Update timer display
                timerElement.textContent = timeLeft;
                
                timer = setInterval(() => {
                    timeLeft--;
                    timerElement.textContent = timeLeft;
                    
                    if (timeLeft <= 5) {
                        timerElement.classList.add('warning');
                    }
                    
                    if (timeLeft <= 0) {
                        clearInterval(timer);
                        nextQuestion();
                    }
                }, 1000);
            }

            function showResults() {
                console.log('Showing results...'); // Debug log
                // Hide quiz section
                document.getElementById('quiz-section').classList.remove('active');
                
                // Show result screen
                document.getElementById('result-screen').classList.add('active');
                
                // Calculate final score
                const totalQuestions = quizData.length;
                const percentage = (score / totalQuestions) * 100;
                
                // Update score display
                scoreElement.textContent = `${score}/${totalQuestions} (${percentage.toFixed(1)}%)`;
                
                // Prepare result message
                let message = "";
                let emoji = "";
                if (percentage >= 90) {
                    message = "Outstanding! You're a quiz master!";
                    emoji = "ðŸ†";
                } else if (percentage >= 80) {
                    message = "Excellent work!";
                    emoji = "ðŸŒŸ";
                } else if (percentage >= 70) {
                    message = "Very good!";
                    emoji = "ðŸ‘";
                } else if (percentage >= 60) {
                    message = "Good effort!";
                    emoji = "ðŸ’ª";
                } else {
                    message = "Keep practicing!";
                    emoji = "ðŸ“š";
                }
                
                // Update result message
                resultMessage.innerHTML = `
                    <div class="result-details">
                        <p class="result-message">${emoji} ${message}</p>
                        <div class="score-breakdown">
                            <p>Total Questions: ${totalQuestions}</p>
                            <p>Correct Answers: ${score}</p>
                            <p>Success Rate: ${percentage.toFixed(1)}%</p>
                        </div>
                    </div>
                `;

                // Save result to localStorage for admin panel
                const quizResult = {
                    timestamp: new Date().toISOString(),
                    score: score,
                    totalQuestions: totalQuestions,
                    percentage: percentage,
                    answers: selectedAnswers,
                    questions: quizData.map(q => ({
                        question: q.question,
                        correctAnswer: q.options[q.correct]
                    }))
                };

                // Get existing results or initialize new array
                const resultsKey = currentQuizKey + '_results';
                const existingResults = JSON.parse(localStorage.getItem(resultsKey) || '[]');
                existingResults.unshift(quizResult); // Add new result at the beginning
                localStorage.setItem(resultsKey, JSON.stringify(existingResults));
            }

            window.restartQuiz = function() {
                console.log('Restarting quiz...'); // Debug log
                // Hide result screen
                document.getElementById('result-screen').classList.remove('active');
                
                // Show welcome screen
                document.getElementById('welcome-screen').classList.add('active');
                
                // Reset quiz state
                currentQuestion = 0;
                score = 0;
                selectedAnswers = [];
                selectedOption = null;
                tabChangeCount = 0;
                isQuizActive = false;
            };
        });
    </script>
</body>
</html>